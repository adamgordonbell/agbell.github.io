{{ $fontUnit := "rem" }}
{{ $largestFontSize := 2.0 }}
{{ $smallestFontSize := 1.0 }}
{{ $fontSpread := sub $largestFontSize $smallestFontSize }}
{{ $max := add (len (index $.Site.Taxonomies.tags.ByCount 0).Pages) 1 }}
{{ $min := len (index $.Site.Taxonomies.tags.ByCount.Reverse 0).Pages }}
{{ $spread := sub $max $min }}
{{ $fontStep := div $fontSpread $spread }}

<div id="tag-cloud" style="padding: 5px 15px">
  {{ range $name, $taxonomy := $.Site.Taxonomies.tags }}
    {{ $tagCount := len $taxonomy.Pages }}
    {{ $weight := div (sub (add $tagCount $min) $min) $spread }}
    {{ $fontSize := add $smallestFontSize (mul (sub $largestFontSize $smallestFontSize) $weight) }}
    <a href="/tags/{{ $name | urlize }}" 
       style="font-size: {{ $fontSize }}{{ $fontUnit }}">
      {{ $name }}
    </a>
  {{ end }}
</div>